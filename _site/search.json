[
  {
    "objectID": "userguide.html",
    "href": "userguide.html",
    "title": "User Guide",
    "section": "",
    "text": "This is the user guide for Penyelidik Jenayah. You can access the Shiny application at this link."
  },
  {
    "objectID": "userguide.html#choropleth-analysis",
    "href": "userguide.html#choropleth-analysis",
    "title": "User Guide",
    "section": "Choropleth Analysis",
    "text": "Choropleth Analysis\nThe first tab of the page is the choropleth analysis. It allows users to visualize crime distributions across different regions of Malaysia.\n\nUsers can select a specific year to analyze, choose between overall crime count and crime per capita as the crime measure, and select specific states to focus on. Additionally, they can filter by crime category and crime type.\nThe color intensity of each region represents the level of the crime measure, with darker shades indicating higher values."
  },
  {
    "objectID": "userguide.html#crime-trends-analysis-dashboard",
    "href": "userguide.html#crime-trends-analysis-dashboard",
    "title": "User Guide",
    "section": "Crime Trends Analysis Dashboard",
    "text": "Crime Trends Analysis Dashboard\nThe second tab, crime trends analysis dashboard, allows users to visualize and analyze crime trends over time for different states in West Malaysia.\n\nThe dashboard displays line charts for each selected state, showing the trend of the chosen crime metric over the specified years. Different line colors represent different states, making it easy to compare trends across regions."
  },
  {
    "objectID": "userguide.html#state-comparison",
    "href": "userguide.html#state-comparison",
    "title": "User Guide",
    "section": "State Comparison",
    "text": "State Comparison\nThe third tab is state comparison . This tool enables users to compare crime distributions between states.\n\nUsers can select a year for comparison, choose between the sum of crime counts and the mean crime count as the comparison measure, and select one or multiple states to compare.\nThe main panel displays a choropleth map of Malaysia, where each district is color-coded based on the selected comparison measure for the chosen year. The color intensity of each state represents the level of the crime measure, darker shades indicating higher values. This visualization helps identify states with higher or lower crime rates relative to others."
  },
  {
    "objectID": "userguide.html#global-measures",
    "href": "userguide.html#global-measures",
    "title": "User Guide",
    "section": "Global Measures",
    "text": "Global Measures\nThe first tab allows users to choose between two permutation tests: Moran‚Äôs I and Geary‚Äôs C. Users can also customize the weight matrix by selecting the contiguity method (Queen or Rook) and the spatial weights style (row standardized).\n The dashboard displays the results of the selected permutation test, including the test statistic, its standard deviation, p-value, and the histogram of simulated values. The histogram helps visualize the distribution of the test statistic under the null hypothesis of no spatial autocorrelation.\nUsers can determine if there is significant spatial autocorrelation in the crime data. A positive Moran‚Äôs I or a negative Geary‚Äôs C indicates spatial clustering, while a negative Moran‚Äôs I or a positive Geary‚Äôs C suggests spatial dispersion."
  },
  {
    "objectID": "userguide.html#local-measures",
    "href": "userguide.html#local-measures",
    "title": "User Guide",
    "section": "Local Measures",
    "text": "Local Measures\nUsers can identify local clusters of high and low crime values across Malaysia in this tab. They can choose between Local Moran‚Äôs I and Local Geary‚Äôs C, and can customize the weight matrix by selecting the contiguity method and the spatial weights style.\n\nEach district is color-coded based on its local indicator value. The color scheme indicates the type of spatial cluster: high-high clusters (red), low-low clusters (blue), high-low clusters (yellow), and low-high clusters (orange). Users can identify areas with significant clustering of high or low crime values, providing insights into the underlying spatial processes driving crime distribution."
  },
  {
    "objectID": "userguide.html#hot-cold-spot-analysis",
    "href": "userguide.html#hot-cold-spot-analysis",
    "title": "User Guide",
    "section": "Hot Cold Spot Analysis",
    "text": "Hot Cold Spot Analysis\nUsers can choose to view either hotspots (clusters of high values) or coldspots (clusters of low values). They can also customize the weight matrix by selecting the contiguity method (Queen or Rook) and the spatial weights style (row standardized).\n\nEach district is color-coded based on its statistical significance. Red areas indicate hotspots (statistically significant clusters of high values), while blue areas indicate coldspots (statistically significant clusters of low values). Users can view areas with significant clustering of high or low crime values."
  },
  {
    "objectID": "userguide.html#variable-exploration",
    "href": "userguide.html#variable-exploration",
    "title": "User Guide",
    "section": "Variable Exploration",
    "text": "Variable Exploration\nThe ‚ÄúSpatial Crime Clustering‚Äù section of the Exploratory Data Analysis page provides tools for understanding the distribution of variables related to crime in Malaysia.\n\nUsers can visualize the distribution of different variables in the dataset. They can select a specific year, state, and plot type (histogram, density plot, box plot, or correlation matrix) to explore the data. Additionally, data can be standardized using min-max scaling or z-score normalization.\nUsers can gain insights into the central tendency, spread, and shape of the data. This information can help identify potential outliers, assess the normality of the data, and understand relationships between variables."
  },
  {
    "objectID": "userguide.html#cluster-configuration",
    "href": "userguide.html#cluster-configuration",
    "title": "User Guide",
    "section": "Cluster Configuration",
    "text": "Cluster Configuration\nThe Cluster Configuration tab in the Spatial Crime Clustering section allows users to explore different clustering configurations for identifying spatial patterns in crime data.\n\nUsers can select a specific year and choose between two clustering methods: Fviz or NbClust. The NbClust method uses the gap statistic to determine the optimal number of clusters. Users can also specify a range of cluster numbers to explore. The dashboard displays a plot of the gap statistic for different numbers of clusters. The optimal number of clusters is the one with the highest gap statistic value."
  },
  {
    "objectID": "userguide.html#cluster-result",
    "href": "userguide.html#cluster-result",
    "title": "User Guide",
    "section": "Cluster Result",
    "text": "Cluster Result\nThe ‚ÄúCluster Result‚Äù tab in the Spatial Crime Clustering section displays the results of the spatial clustering analysis.\n\nUsers can select a specific year and choose between three clustering techniques: Hierarchical, ClustG, and Skater. Each technique has its own set of parameters that can be adjusted to fine-tune the clustering results. The dashboard displays maps with different color-coded clusters representing regions with similar crime patterns. The number of clusters can be adjusted using the slider."
  },
  {
    "objectID": "datapreprocessing.html",
    "href": "datapreprocessing.html",
    "title": "Data Pre-Processing",
    "section": "",
    "text": "This page provides instructions on how to recreate the pre-processed datasets that power our Shiny Application. We have pre-processed these datasets ahead of time, which significantly reduces the loading time and complexity of the application, ensuring a smoother user experience."
  },
  {
    "objectID": "datapreprocessing.html#packages-required",
    "href": "datapreprocessing.html#packages-required",
    "title": "Data Pre-Processing",
    "section": "2.1 Packages Required",
    "text": "2.1 Packages Required\nThe following will be the packages used for this study and the Shiny Application:\n\npacman::p_load(sf, st, tidyverse, raster, tmap, tmaptools, ggplot2, gridExtra, spatstat, sfdep, spdep, ClustGeo, \n               ggpubr, cluster, factoextra, NbClust,\n               heatmaply, corrplot, psych, GGally)\n\n\nsf: For working with simple features, a standard for spatial data in R.\ntidyverse: A collection of packages for data manipulation and visualization, including dplyr, tidyr, ggplot2, etc.\ntmap: For creating static and interactive maps.\nggplot2: A powerful visualization package for creating static plots.\ngridExtra: For arranging multiple plots on a single page.\nsfdep: For spatial dependency analysis.\nClustGeo: For spatial clustering analysis.\ncluster: For various clustering algorithms, including K-means and hierarchical clustering.\nfactoextra: For visualizing and evaluating clustering results.\nNbClust: For determining the optimal number of clusters.\nheatmaply: For creating interactive heatmaps.\ncorrplot: For visualizing correlation matrices.\nGGally: For advanced data visualization, including pair plots and correlation plots."
  },
  {
    "objectID": "datapreprocessing.html#data-required",
    "href": "datapreprocessing.html#data-required",
    "title": "Data Pre-Processing",
    "section": "2.2 Data Required",
    "text": "2.2 Data Required\nThere are a total of 5 aspatial datasets used in this project.\n\nMalaysia ‚Äì Crime by District and Crime Type from data.gov.my in csv format.\nMalaysia - Subnational Administrative Boundaries with included administrative regions in shapefile format.\nMalaysia ‚Äì Annual Principal Labour Force Statistics by District from data.gov.my in csv format.\nMalaysia ‚Äì Poverty by Administrative District from data.gov.my in csv format.\nMalaysia ‚Äì Income Inequality by District from data.gov.my in csv format.\nMalaysia ‚Äì Population by District from data.gov.my in csv format.\n\n\n2.2.1 Aspatial Data\nWe start by importing the crime rate and population csv file into R.\n\ncrime_df &lt;- read_csv(\"data/aspatial/crime_district.csv\")\npopulation_df &lt;- read_csv(\"data/aspatial/population_district.csv\")\n\n\n\n2.2.2 Geospatial Data\nNext, we import the administrative (Level 2, District) regions of Malaysia.\n\nmys_sf &lt;- read_sf(dsn = \"data/geospatial/mys_adm_unhcr_20210211_shp\", \n                 layer = \"mys_admbnda_adm2_unhcr_20210211\") %&gt;%\n          st_transform(crs = 3168)\n\n\n\n2.2.3 Enrichment Data\nWe will also be importing and working we several other potentially related data to crime rates in Malaysia and uncover if there is any further insights which could be extracted from their usage. The following teh details of the fields:\n\nPoverty by District: Poverty rates by administrative district from 2019 to 2022\n\n\npoverty_absolute: Proportion of households with monthly income below the Poverty Line Income (PLI)\npoverty_relative: Proportion of households with monthly income below half the district median income\n\n\nInequality by District: Gini coefficient by administrative district from 2019 to 2022.\n\n\ngini: The Gini coefficient based on the distribution of households‚Äô gross monthly income\n\n\nLabour Force Statistics by District: Annual principal labour force statistics at district level, including unemployment and participation rates.\n\n\nlf: The number (in thousands) of employed and unemployed individuals. This figure also represents the number of people participating in the labour force.\nlf_employed: The number (in thousands) of people who worked at least one hour for pay, profit or family gain, in thousands of people\nlf_unemployed: The number (in thousands) of people who did not work but were looking for work or available to work\nlf_outside: The number (in thousands) of people not classified as employed or unemployed, including housewives, students, early retired, disabled persons and those not interested in looking for a job\nu_rate: Ratio of unemployed to labour force size\np_rate: Ratio of the labour force size to the working-age (15-64) population\nep_ratio: Ratio of the number of employed people to the working-age (15-64) population\n\n\npoverty_df &lt;- read_csv(\"data/aspatial/poverty_district.csv\")\ninequality_df &lt;- read_csv(\"data/aspatial/inequality_district.csv\")\nlabour_df &lt;- read_csv(\"data/aspatial/labour_district.csv\")"
  },
  {
    "objectID": "datapreprocessing.html#wrangling",
    "href": "datapreprocessing.html#wrangling",
    "title": "Data Pre-Processing",
    "section": "2.3 Wrangling",
    "text": "2.3 Wrangling\nNext we shall prepare our data for analysis, which includes proper mapping of data and joining for the aspatial datasets with the geospatial dataset.\n\n2.3.1 Data Preparation\nBefore we can check the mappings we convert state and district to upper to ensure a smooth matching and join. We also extracted the year as a column since the aspatial data are all annual.\n\nCrimePopulationMalaysia\n\n\nConvert state and district to upper for matching\n\ncrime_df &lt;- crime_df %&gt;%\n              mutate(year = year(date),\n                     state = toupper(state),\n                     district = toupper(district))\n\n\n\n\npopulation_df &lt;- population_df %&gt;%\n              mutate(year = year(date),\n                     state = toupper(state),\n                     district = toupper(district))\n\n\n\n\nmys_sf &lt;- mys_sf %&gt;%\n          mutate(ADM1_EN = toupper(ADM1_EN),\n                 ADM2_EN = toupper(ADM2_EN))\n\n\n\n\n\n\n2.3.2 State Mismatch\nNext we check for any mismatch on ADM1 (State-level)\n\nOverviewDifference\n\n\n\nprint(\"Unique states in crime_df:\")\nunique(crime_df$state)\n\nprint(\"Unique states in population_df:\")\nunique(population_df$state)\n\nprint(\"Unique states in mys_sf:\")\nunique(mys_sf$ADM1_EN)\n\nAt first glance we can see a mismatch in the length of the states.\n\n\n\nstate_crime &lt;- unique(crime_df$state)\nstate_sf &lt;- unique(mys_sf$ADM1_EN)\n\nmissing_in_sf &lt;- setdiff(state_crime, state_sf)\nmissing_in_crime &lt;- setdiff(state_sf, state_crime)\n\nprint(\"States in crime_df not found in mys_sf:\")\nprint(missing_in_sf)\n\nprint(\"States in mys_sf not found in crime_df:\")\nprint(missing_in_crime)\n\nIt seems like crime_df also have a row for the aggregated crime rates for the whole of Malaysia. Whereas W.P. LABUAN, W.P. PUTRAJAYA are not found in the spatial dataset.\n\n\n\n\n\n2.3.3 State Wrangling\nFor this project we will be focusing on West Malaysia, and thus will be filtering out Sarawak, Sabah and Labuan. To address the issue identified above we will be mapping: ‚ÄòW.P. PUTRAJAYA‚Äô -&gt; ‚ÄòKUALA LUMPUR‚Äô.\n\nCrimePopulationMalaysia\n\n\n\ncrime_df &lt;- crime_df %&gt;%\n              filter(state != 'MALAYSIA' & state != 'SABAH' & state != 'SARAWAK' & \n                     district != 'ALL' & type != 'all') %&gt;%\n              mutate(state = replace(state, state == 'W.P. KUALA LUMPUR', 'KUALA LUMPUR'))\n\n\n\n\npopulation_df &lt;- population_df %&gt;%\n          filter(state != 'SABAH' & state != 'SARAWAK' & state != 'W.P. LABUAN' &\n                 sex == \"both\" & age == \"overall\" & ethnicity == \"overall\" ) %&gt;%\n          mutate(state = replace(state, state == 'W.P. KUALA LUMPUR', 'KUALA LUMPUR'),\n                 state = replace(state, state == 'W.P. PUTRAJAYA', 'KUALA LUMPUR')) %&gt;%\n          dplyr::select(state, district, year, population)\n\n\n\n\nmys_sf &lt;- mys_sf %&gt;%\n          filter(ADM1_EN != 'W.P. LABUAN' & ADM1_EN != 'SABAH' & ADM1_EN != 'SARAWAK') %&gt;%\n          mutate(ADM1_EN = replace(ADM1_EN, ADM1_EN == 'W.P. KUALA LUMPUR', 'KUALA LUMPUR'),\n                 ADM1_EN = replace(ADM1_EN, ADM1_EN == 'W.P. PUTRAJAYA', 'KUALA LUMPUR'))\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nW.P. PUTRAJAYA -&gt; KUALA LUMPUR ??\nIt is noted that W.P. PUTRAJAYA is within SELANGOR but for the ease of joining with subsequent data it will mapped under KUALA LUMPUR state\n\n\n\n\n2.3.4 State-District Wrangling (Crime)\nNext we will be wrangling the data on the district level, the methodology is similar as above: 1. Check difference of unique state_district 2. Address difference by mapping district not found within mys_sf into available districts 3. Aggregate the newly mapped variables under a similar district\n\n2.3.4.1 State-District Mismatch\n\ncrime_df &lt;- crime_df %&gt;% mutate(state_district = paste(state, district, sep = \"-\"))\nmys_sf &lt;- mys_sf %&gt;% mutate(state_district = paste(ADM1_EN, ADM2_EN, sep = \"-\"))\n\n\nstate_district_crime &lt;- unique(crime_df$state_district)\nstate_district_sf &lt;- unique(mys_sf$state_district)\n\nmissing_in_sf &lt;- setdiff(state_district_crime, state_district_sf)\nmissing_in_crime &lt;- setdiff(state_district_sf, state_district_crime)\n\nprint(\"State-District combinations in crime_df not found in mys_sf:\")\nprint(missing_in_sf)\n\nprint(\"State-District combinations in mys_sf not found in crime_df:\")\nprint(missing_in_crime)\n\nThat is alot of mismatch! The process involves checking the available districts in mys_sf and assiging the districts.\n\n\n2.3.4.2 Re-Mapping Districts\nAfter the team sat down to sort out the mapping this is the list of mapping to address the above mismatch.\n\ncrime_df &lt;- crime_df %&gt;%\n  mutate(district = case_when(\n    state == \"JOHOR\" & district %in% c(\"ISKANDAR PUTERI\", \"NUSAJAYA\", \"JOHOR BAHRU SELATAN\", \"JOHOR BAHRU UTARA\", \"SERI ALAM\") ~ \"JOHOR BAHRU\",\n    state == \"NEGERI SEMBILAN\" & district == \"NILAI\" ~ \"SEREMBAN\",\n    state == \"KEDAH\" & district == \"BANDAR BHARU\" ~ \"BANDAR BAHARU\",\n    state == \"PAHANG\" & district == \"CAMERON HIGHLAND\" ~ \"CAMERON HIGHLANDS\",\n    state == \"PAHANG\" & district == \"KUALA LIPIS\" ~ \"LIPIS\",\n    state == \"PERAK\" & district  %in% c(\"BATU GAJAH\", \"IPOH\") ~ \"KINTA\",\n    state == \"PERAK\" & district == \"GERIK\" ~ \"ULU PERAK\",\n    state == \"PERAK\" & district == \"MANJUNG\" ~ \"MANJUNG (DINDING)\",\n    state == \"PERAK\" & district == \"PENGKALAN HULU\" ~ \"ULU PERAK\",\n    state == \"PERAK\" & district %in% c(\"SELAMA\", \"TAIPING\") ~ \"LARUT DAN MATANG\",\n    state == \"PERAK\" & district == \"SUNGAI SIPUT\" ~ \"KUALA KANGSAR\",\n    state == \"PERAK\" & district %in% c(\"TANJONG MALIM\", \"TAPAH\") ~ \"BATANG PADANG\",\n    state == \"PERLIS\" & district %in% c(\"ARAU\", \"KANGAR\", \"PADANG BESAR\") ~ \"PERLIS\",\n    state == \"PULAU PINANG\" & district == \"SEBERANG PERAI SELATAN\" ~ \"S.P.SELATAN\",\n    state == \"PULAU PINANG\" & district == \"SEBERANG PERAI TENGAH\" ~ \"S.P. TENGAH\",\n    state == \"PULAU PINANG\" & district == \"SEBERANG PERAI UTARA\" ~ \"S.P. UTARA\",\n    state == \"SELANGOR\" & district == \"AMPANG JAYA\" ~ \"GOMBAK\",\n    state == \"SELANGOR\" & district == \"HULU SELANGOR\" ~ \"ULU SELANGOR\",\n    state == \"SELANGOR\" & district == \"KAJANG\" ~ \"ULU LANGAT\",\n    state == \"SELANGOR\" & district %in% c(\"KLANG SELATAN\", \"KLANG UTARA\") ~ \"KLANG\",\n    state == \"SELANGOR\" & district %in% c(\"PETALING JAYA\", \"SERDANG\", \"SG. BULOH\", \"SHAH ALAM\", \"SUBANG JAYA\", \"SUNGAI BULOH\") ~ \"PETALING\",\n    state == \"KUALA LUMPUR\" & district %in% c(\"BRICKFIELDS\", \"CHERAS\", \"DANG WANGI\", \"SENTUL\", \"WANGSA MAJU\") ~ \"WP. KUALA LUMPUR\",\n    TRUE ~ district\n  )) %&gt;%\n  group_by(state, district, year, category, type) %&gt;%\n  summarise(crimes = sum(crimes))\n\n\n\n\n\n\n\nType of issues\n\n\n\n\nThe common issue are related to translation, or districts with different names e.g.¬†‚ÄúPENGKALAN HULU‚Äù ~ ‚ÄúULU PERAK‚Äù\nSome comes down to preferences e.g.¬†‚ÄúCAMERON HIGHLAND‚Äù ~ ‚ÄúCAMERON HIGHLANDS‚Äù, ‚ÄúMANJUNG‚Äù ~ ‚ÄúMANJUNG (DINDING)‚Äù,\nAnd in some cases a district may be broken down into sub-districts e.g.¬†c(‚ÄúPETALING JAYA‚Äù, ‚ÄúSERDANG‚Äù, ‚ÄúSG. BULOH‚Äù, ‚ÄúSHAH ALAM‚Äù, ‚ÄúSUBANG JAYA‚Äù, ‚ÄúSUNGAI BULOH‚Äù) ~ ‚ÄúPETALING‚Äù,\n\n\n\n\n\n2.3.4.3 Crime Distribution\nIn the following we can see the distribution of crime rates (raw) on the map of West Malaysia. Note that the crime rates happens to be higher where the population is higher such as in Johor Bahru and Kuala Lumpur.\n\nVisualization\n\n\n\nog_crime_df_mys &lt;- crime_df %&gt;%\n  filter(year &gt;= 2019 & year &lt;= 2022) %&gt;%\n  left_join(mys_sf, by = c(\"state\" = \"ADM1_EN\", \"district\" = \"ADM2_EN\")) %&gt;%\n  dplyr::select(state, district, year, category, type, crimes, geometry)\n\nog_crime_df_mys &lt;- st_as_sf(og_crime_df_mys)\n\nog_crime_df_mys_grp &lt;- og_crime_df_mys %&gt;%\n  group_by(state, district) %&gt;%\n  summarize(total_crimes = sum(crimes)/4)\n\nmys_map &lt;- tm_shape(mys_sf) +\n  tm_polygons(col = \"lightgray\", alpha = 0.3) +\n  tm_text(\"ADM2_EN\", size = 0.3) +\n  tm_layout(main.title = \"Districts (West Malaysia)\",\n            main.title.position = \"center\",\n            main.title.size = 1.2,\n            legend.height = 0.45, \n            legend.width = 0.35,\n            frame = TRUE) +\n  tm_borders(alpha = 0.5) +\n  tm_grid(alpha =0.2)\n\nchoro_map &lt;- tm_shape(og_crime_df_mys_grp) +\n  tm_fill(\"total_crimes\", \n          style = \"pretty\", \n          palette = \"Oranges\",\n          title = \"Crimes\") +\n  tm_layout(main.title = \"Crime Distribution (West Malaysia)\",\n            main.title.position = \"center\",\n            main.title.size = 1.2,\n            legend.height = 0.45, \n            legend.width = 0.35,\n            frame = TRUE) +\n  tm_borders(alpha = 0.5) +\n  tm_compass(type=\"8star\", size = 2, position = c(\"right\", \"top\")) +\n  tm_grid(alpha =0.2)\n\ntmap_arrange(choro_map, mys_map, ncol = 2)\n\n\n\n\n\n\n\n\n\n\nMissing Data (POKOK SENA)\n\n\n\nNote the missing data in POKOK SENA in crime_df, which we will be rectifying in the subsequent join with the crime aggregated by KEDAH state\n\n\n\n\n\n2.3.5 State-District Wrangling (Population)\nThe crime data provided is not sufficient to paint an accurate picture of the crime patterns in Malaysia as it is heavily skewed towards places with higher population, this will not be ideal for our analysis, hence we will be importing Population by district to adjust the crime accordingly.\n\n2.3.5.1 State-District Mismatch\nThe data for population is only available from 2020 - 2024. Since 2019 is missing from data set, we will do a best effort mapping where year: 2020 -&gt; 2019.\n\npopulation_row &lt;- population_df %&gt;%\n  filter(year == 2020) %&gt;%\n  mutate(year = 2019) \npopulation_df &lt;- bind_rows(population_df, population_row) %&gt;% \n  mutate(state_district = paste(state, district, sep = \"-\"))\nunique(population_df$year)\n\nNext we check mismatch on the state-district.\n\nstate_district_population &lt;- unique(population_df$state_district)\n\nmissing_in_sf &lt;- setdiff(state_district_population, state_district_sf)\nmissing_in_population &lt;- setdiff(state_district_sf, state_district_population)\n\nprint(\"State-District combinations in population_df not found in mys_sf:\")\nprint(missing_in_sf)\n\nprint(\"State-District combinations in mys_sf not found in population_df:\")\nprint(missing_in_population)\n\n\n\n2.3.5.2 Re-Mapping Districts\nWe employed the similar methodology to map the Population data.\n\npopulation_df &lt;- population_df %&gt;%\n  mutate(district = case_when(\n    state == \"JOHOR\" & district == \"KULAI\" ~ \"KULAIJAYA\",\n    state == \"JOHOR\" & district == \"TANGKAK\" ~ \"LEDANG\",\n    state == \"KELANTAN\" & district == \"KECIL LOJING\" ~ \"GUA MUSANG\",\n    state == \"PAHANG\" & district == \"CAMERON HIGHLAND\" ~ \"CAMERON HIGHLANDS\",\n    state == \"PERAK\" & district == \"HULU PERAK\" ~ \"ULU PERAK\",\n    state == \"PERAK\" & district == \"BAGAN DATUK\" ~ \"HILIR PERAK\",\n    state == \"PERAK\" & district == \"MANJUNG\" ~ \"MANJUNG (DINDING)\",\n    state == \"PERAK\" & district == \"MUALLIM\" ~ \"BATANG PADANG\",\n    state == \"PERAK\" & district == \"SELAMA\" ~ \"LARUT DAN MATANG\",\n    state == \"PULAU PINANG\" & district == \"SEBERANG PERAI SELATAN\" ~ \"S.P.SELATAN\",\n    state == \"PULAU PINANG\" & district == \"SEBERANG PERAI TENGAH\" ~ \"S.P. TENGAH\",\n    state == \"PULAU PINANG\" & district == \"SEBERANG PERAI UTARA\" ~ \"S.P. UTARA\",\n    state == \"PULAU PINANG\" & district == \"SP SELATAN\" ~ \"S.P.SELATAN\",\n    state == \"PULAU PINANG\" & district == \"SP TENGAH\" ~ \"S.P. TENGAH\",\n    state == \"PULAU PINANG\" & district == \"SP UTARA\" ~ \"S.P. UTARA\",\n    state == \"TERENGGANU\" & district == \"KUALA NERUS\" ~ \"KUALA TERENGGANU\",\n    state == \"KUALA LUMPUR\" & district == \"W.P. KUALA LUMPUR\" ~ \"WP. KUALA LUMPUR\",\n    TRUE ~ district\n  )) %&gt;%\n  group_by(state, district, year) %&gt;%\n  summarise(population = sum(population))\n\npopulation_df\n\n\n\n2.3.5.3 Population Distribution\nThe following is a quick visualization of the population data in West Malaysia.\n\nVisualization\n\n\n\npopulation_df_mys &lt;- population_df %&gt;%\n  left_join(mys_sf, by = c(\"state\" = \"ADM1_EN\", \"district\" = \"ADM2_EN\")) %&gt;%\n  dplyr::select(state, district, year, population, geometry)\n\npopulation_df_mys &lt;- st_as_sf(population_df_mys)\n\npopulation_df_mys_grp &lt;- population_df_mys %&gt;%\n  group_by(state, district) %&gt;%\n  summarize(total_crimes = sum(population)/4)\n\nmys_map &lt;- tm_shape(mys_sf) +\n  tm_polygons() +\n  tm_text(\"ADM2_EN\", size = 0.3) +\n  tm_layout(main.title = \"Districts (West Malaysia)\",\n            main.title.position = \"center\",\n            main.title.size = 1.2,\n            legend.height = 0.45, \n            legend.width = 0.35,\n            frame = TRUE) +\n  tm_borders(alpha = 0.5) +\n  tm_grid(alpha =0.2)\n\nchoro_map &lt;- tm_shape(population_df_mys_grp) +\n  tm_fill(\"total_crimes\", \n          style = \"pretty\", \n          palette = \"Blues\",\n          title = \"Crimes\") +\n  tm_layout(main.title = \"Population Distribution (West Malaysia)\",\n            main.title.position = \"center\",\n            main.title.size = 1.2,\n            legend.height = 0.45, \n            legend.width = 0.35,\n            frame = TRUE) +\n  tm_borders(alpha = 0.5) +\n  tm_compass(type=\"8star\", size = 2, position = c(\"right\", \"top\")) +\n  tm_grid(alpha =0.2)\n\ntmap_arrange(choro_map, mys_map, ncol = 2)\n\n\n\n\n\n\n\n\n\n\nSimilarity in Observation\n\n\n\nWe can note that the districts with more crime tend to have a higher population we suggest it is positively correlated. Hence for a more accurate representation of crime rate we need to adjust the crimes to per captia (1000) for the districts.\n\n\n\n\n\n2.3.6 Joining\nWe will next perform join of the data on crime_df with population_df to normalize our crime data\n\n2.3.6.1 Join with Population Data\nHere we compute the crimes per 1000 capita to ensure the data is normalized\n\ncrime_df_mys &lt;- crime_df %&gt;% \n  filter(year &gt;= 2019 & year &lt;= 2022) %&gt;%\n  left_join(population_df, by = c(\"state\", \"district\", \"year\")) %&gt;%\n  mutate(crimes_pc = crimes/population) %&gt;%\n  dplyr::select(state, district, year, category, type, crimes, crimes_pc, population)\n\n\n\n2.3.6.2 Filling for POKOK SENA District\nGiven the missing data for POKOK SENA, we will be getting the state average for the district in this case the state of KEDAH\n\npokok_sena_rows &lt;- crime_df_mys %&gt;%\n  filter(state == \"KEDAH\") %&gt;%\n  group_by(state, year, category, type) %&gt;%\n  summarise(crimes = mean(crimes),\n            crimes_pc = mean(crimes_pc),\n            population = mean(population)) %&gt;% \n  mutate(district = \"POKOK SENA\")\n\npokok_sena_rows\ncrime_df_mys &lt;- bind_rows(crime_df_mys, pokok_sena_rows)\n\n\n\n2.3.6.3 Join with District Boundary\nWe finish off the join with a join with our spatial dataset mys_sf.\n\ncrime_df_mys &lt;- crime_df_mys %&gt;%\n  left_join(mys_sf, by = c(\"state\" = \"ADM1_EN\", \"district\" = \"ADM2_EN\")) %&gt;%\n  dplyr::select(state, district, year, category, type, crimes, crimes_pc, population, geometry)\n\ncrime_df_mys &lt;- st_as_sf(crime_df_mys)\ncrime_df_mys\n\n\n\n\n2.3.7 Crime per Capita Distribution\n\ncrime_df_mys_grp &lt;- crime_df_mys %&gt;%\n  group_by(state, district) %&gt;%\n  summarize(total_crimes_pc = sum(crimes_pc)/4)\n\nog_choro_map &lt;- tm_shape(og_crime_df_mys_grp) +\n  tm_fill(\"total_crimes\", \n          n = 5,\n          style = \"equal\", \n          palette = \"Oranges\",\n          title = \"Crimes\") +\n  tm_layout(main.title = \"Crime Distribution (West Malaysia)\",\n            main.title.position = \"center\",\n            main.title.size = 1.2,\n            legend.height = 0.45, \n            legend.width = 0.35,\n            frame = TRUE) +\n  tm_borders(alpha = 0.5) +\n  tm_compass(type=\"8star\", size = 2, position = c(\"right\", \"top\")) +\n  tm_grid(alpha =0.2)\n\nchoro_map &lt;- tm_shape(crime_df_mys_grp) +\n  tm_fill(\"total_crimes_pc\", \n          n = 5,\n          style = \"equal\", \n          palette = \"Oranges\",\n          title = \"Crimes\") +\n  tm_layout(main.title = \"Crime per Capita Distribution\",\n            main.title.position = \"center\",\n            main.title.size = 1.2,\n            legend.height = 0.45, \n            legend.width = 0.35,\n            frame = TRUE) +\n  tm_borders(alpha = 0.5) +\n  tm_compass(type=\"8star\", size = 2, position = c(\"right\", \"top\")) +\n  tm_grid(alpha =0.2)\n\ntmap_arrange(og_choro_map, choro_map, ncol = 2)\n\n\n\n\n\n\n\nMuch better!\n\n\n\nNote how much more insights we can extract from our adjusted crime choro plot. The district with population still seem to be higher in crime however we can also identify other clusters i.e.¬†several cold spots in Kelantan etc.\n\n\n\n\n2.3.8 Correlation Plot\nNext we take a quick look at how correlated the data are with across the various types of crimes\n\npiv_crime_df_mys &lt;- crime_df_mys %&gt;%\n  mutate(cat_type = paste(category, type, sep = \"-\")) %&gt;%\n  select(-category, -type, -crimes, -population) %&gt;%\n  pivot_wider(\n    names_from = cat_type,\n    values_from = crimes_pc,\n    values_fill = 0\n  ) \n\ncorrplot.mixed(cor(st_drop_geometry(piv_crime_df_mys)[, 4:15]),\n         lower = \"ellipse\", \n               upper = \"number\",\n               tl.pos = \"lt\",\n               diag = \"l\",\n               tl.col = \"black\",\n               tl.srt = 45, \n               tl.cex = 0.5)\n\nDuring the EDA we have noted that some crimes such as robbery_gang_armed tend are typically really low in record. Hence to further narrow our subsequent analysis we will group robbery as one category and vehicle theft as the other since they are highly correlated.\n\npiv_crime_df_mys &lt;- piv_crime_df_mys %&gt;%\n  mutate(\n    robbery = `assault-robbery_gang_armed` + `assault-robbery_gang_unarmed` + \n              `assault-robbery_solo_armed` + `assault-robbery_solo_unarmed`,\n    vehicle_theft = `property-theft_vehicle_lorry` + `property-theft_vehicle_motorcar` + \n                    `property-theft_vehicle_motorcycle`\n  ) %&gt;%\n  select(-`assault-robbery_gang_armed`, -`assault-robbery_gang_unarmed`, \n         -`assault-robbery_solo_armed`, -`assault-robbery_solo_unarmed`,\n         -`property-theft_vehicle_lorry`, -`property-theft_vehicle_motorcar`, \n         -`property-theft_vehicle_motorcycle`) %&gt;%\n  rename_with(~str_remove(., \"^assault-|^property-\"))\n\npiv_crime_df_mys\n\nThe final crime type correlation matrix should look like the following.\n\ncorrplot.mixed(cor(st_drop_geometry(piv_crime_df_mys)[, 4:10]),\n         lower = \"ellipse\", \n               upper = \"number\",\n               tl.pos = \"lt\",\n               diag = \"l\",\n               tl.col = \"black\",\n               tl.srt = 45, \n               tl.cex = 0.5)\n\n\n\n\n\n\n\nInitial Analysis\n\n\n\nAcross the board it seems like only robbery have high correlation with vehicle_theft. However we will not be dropping either as they are key variables we would like extract insights from."
  },
  {
    "objectID": "datapreprocessing.html#data-enrichment",
    "href": "datapreprocessing.html#data-enrichment",
    "title": "Data Pre-Processing",
    "section": "2.4 Data Enrichment",
    "text": "2.4 Data Enrichment\nTo further enrich our analysis we will incoporate several socio-economic data which may potentially influence/affect crime rates such labour participation rates, poverty and income inequality by district\n\n2.4.1 State Wrangling\n\nprint(\"Unique states in mys_sf:\")\nunique(mys_sf$ADM1_EN)\n\nprint(\"Unique states in poverty_df:\")\nunique(poverty_df$state)\n\nprint(\"Unique states in inequality_df:\")\nunique(inequality_df$state)\n\nprint(\"Unique states in labour_df:\")\nunique(labour_df$state)\n\nSimilarly we prep the data by transforming the data and filtering out east Malaysia\n\npoverty_df &lt;- poverty_df %&gt;%\n          mutate(year = year(date),\n                 state = toupper(state),\n                 district = toupper(district)) %&gt;%\n          filter(state != 'SABAH' & state != 'SARAWAK' & state != 'W.P. LABUAN') %&gt;%\n          mutate(state = replace(state, state == 'W.P. KUALA LUMPUR', 'KUALA LUMPUR'),\n                 state = replace(state, state == 'W.P. PUTRAJAYA', 'KUALA LUMPUR'))\n\ninequality_df &lt;- inequality_df %&gt;%\n          mutate(year = year(date),\n                 state = toupper(state),\n                 district = toupper(district)) %&gt;%\n          filter(state != 'SABAH' & state != 'SARAWAK' & state != 'W.P. LABUAN') %&gt;%\n          mutate(state = replace(state, state == 'W.P. KUALA LUMPUR', 'KUALA LUMPUR'),\n                 state = replace(state, state == 'W.P. PUTRAJAYA', 'KUALA LUMPUR'))\n\nlabour_df &lt;- labour_df %&gt;%\n          mutate(year = year(date),\n                 state = toupper(state),\n                 district = toupper(district)) %&gt;%\n          filter(state != 'SABAH' & state != 'SARAWAK')\n\n\nprint(\"Unique states & years in mys_sf:\")\nsort(unique(mys_sf$ADM1_EN))\n\nprint(\"Unique states & years in poverty_df:\")\nsort(unique(poverty_df$state))\nsort(unique(poverty_df$year))\n\nprint(\"Unique states & years in inequality_df:\")\nsort(unique(inequality_df$state))\nsort(unique(inequality_df$year))\n\nprint(\"Unique states & years in labour_df:\")\nsort(unique(labour_df$state))\nsort(unique(labour_df$year))\n\n\n\n\n\n\n\nCritical Data Issues\n\n\n\nFrom the data we identified 2 issues: 1. Poverty and Inequality data is missing years 2020 and 2021 2. Labour data is missing PERLIS, KUALA LUMPUR and PUTRAJAYA\n\n\n\n\n2.4.2 State-District Wrangling (Poverty & Inequaltiy)\n\n2.4.2.1 Filling Year Data\nSince years 2020 and 2021 are missing from data set, we will map to prior or the next year:\n\n2020 -&gt; 2019\n2021 -&gt; 2022\n\n\npoverty_rows &lt;- poverty_df %&gt;%\n  mutate(year = ifelse(year == 2019, 2020, 2021))\npoverty_df &lt;- bind_rows(poverty_df, poverty_rows)\nunique(poverty_df$year)\n\ninequality_rows &lt;- inequality_df %&gt;%\n  mutate(year = ifelse(year == 2019, 2020, 2021))\ninequality_df &lt;- bind_rows(inequality_df, inequality_rows)\nunique(inequality_df$year)\n\n\n\n2.4.2.2 State-District Mismatch\nSimilarly we will have to wrangle for District level too.\n\npoverty_df &lt;- poverty_df %&gt;% mutate(state_district = paste(state, district, sep = \"-\"))\ninequality_df &lt;- inequality_df %&gt;% mutate(state_district = paste(state, district, sep = \"-\"))\n\nSince the data for inequality comes from the same ministry and the districts are the same we will only be checking for Poverty.\n\nstate_district_poverty &lt;- unique(poverty_df$state_district)\n\nmissing_in_sf &lt;- setdiff(state_district_poverty, state_district_sf)\nmissing_in_poverty &lt;- setdiff(state_district_sf, state_district_poverty)\n\nprint(\"State-District combinations in poverty_df not found in mys_sf:\")\nprint(missing_in_sf)\n\nprint(\"State-District combinations in mys_sf not found in poverty_df:\")\nprint(missing_in_poverty)\n\n\n\n2.4.2.3 Re-Mapping Districts\nThis step is getting tedious, but still, very crucial.\n\npoverty_df &lt;- poverty_df %&gt;%\n  mutate(district = case_when(\n    state == \"JOHOR\" & district == \"KULAI\" ~ \"KULAIJAYA\",\n    state == \"JOHOR\" & district == \"TANGKAK\" ~ \"LEDANG\",\n    state == \"KELANTAN\" & district == \"KECIL LOJING\" ~ \"GUA MUSANG\",\n    state == \"PERAK\" & district == \"HULU PERAK\" ~ \"ULU PERAK\",\n    state == \"PERAK\" & district == \"BAGAN DATUK\" ~ \"HILIR PERAK\",\n    state == \"PERAK\" & district == \"MANJUNG\" ~ \"MANJUNG (DINDING)\",\n    state == \"PERAK\" & district == \"MUALLIM\" ~ \"BATANG PADANG\",\n    state == \"PERAK\" & district == \"SELAMA\" ~ \"LARUT DAN MATANG\",\n    state == \"PULAU PINANG\" & district == \"SEBERANG PERAI SELATAN\" ~ \"S.P.SELATAN\",\n    state == \"PULAU PINANG\" & district == \"SEBERANG PERAI TENGAH\" ~ \"S.P. TENGAH\",\n    state == \"PULAU PINANG\" & district == \"SEBERANG PERAI UTARA\" ~ \"S.P. UTARA\",\n    state == \"TERENGGANU\" & district == \"KUALA NERUS\" ~ \"KUALA TERENGGANU\",\n    state == \"KUALA LUMPUR\" & district == \"W.P. KUALA LUMPUR\" ~ \"WP. KUALA LUMPUR\",\n    TRUE ~ district\n  )) %&gt;%\n  group_by(state, district, year) %&gt;%\n  summarise(poverty_absolute = mean(poverty_absolute),\n            poverty_relative = mean(poverty_relative))\n\npoverty_df\n\n\ninequality_df &lt;- inequality_df %&gt;%\n  mutate(district = case_when(\n    state == \"JOHOR\" & district == \"KULAI\" ~ \"KULAIJAYA\",\n    state == \"JOHOR\" & district == \"TANGKAK\" ~ \"LEDANG\",\n    state == \"KELANTAN\" & district == \"KECIL LOJING\" ~ \"GUA MUSANG\",\n    state == \"PERAK\" & district == \"HULU PERAK\" ~ \"ULU PERAK\",\n    state == \"PERAK\" & district == \"BAGAN DATUK\" ~ \"HILIR PERAK\",\n    state == \"PERAK\" & district == \"MANJUNG\" ~ \"MANJUNG (DINDING)\",\n    state == \"PERAK\" & district == \"MUALLIM\" ~ \"BATANG PADANG\",\n    state == \"PERAK\" & district == \"SELAMA\" ~ \"LARUT DAN MATANG\",\n    state == \"PULAU PINANG\" & district == \"SEBERANG PERAI SELATAN\" ~ \"S.P.SELATAN\",\n    state == \"PULAU PINANG\" & district == \"SEBERANG PERAI TENGAH\" ~ \"S.P. TENGAH\",\n    state == \"PULAU PINANG\" & district == \"SEBERANG PERAI UTARA\" ~ \"S.P. UTARA\",\n    state == \"TERENGGANU\" & district == \"KUALA NERUS\" ~ \"KUALA TERENGGANU\",\n    state == \"KUALA LUMPUR\" & district == \"W.P. KUALA LUMPUR\" ~ \"WP. KUALA LUMPUR\",\n    TRUE ~ district\n  )) %&gt;%\n  group_by(state, district, year) %&gt;%\n  summarise(gini = mean(gini))\n\ninequality_df\n\n\n\n\n2.4.3 State-Distrcit Wrangling (Labour)\n\n2.4.3.1 State-District Mismatch\nNo change as with above.\n\nlabour_df &lt;- labour_df %&gt;% mutate(state_district = paste(state, district, sep = \"-\"))\n\n\nstate_district_labour &lt;- unique(labour_df$state_district)\n\nmissing_in_sf &lt;- setdiff(state_district_labour, state_district_sf)\nmissing_in_labour &lt;- setdiff(state_district_sf, state_district_labour)\n\nprint(\"State-District combinations in labour_df not found in mys_sf:\")\nprint(missing_in_sf)\n\nprint(\"State-District combinations in mys_sf not found in labour_df:\")\nprint(missing_in_labour)\n\n\n\n2.4.3.2 Re-Mapping Districts\n\nlabour_df &lt;- labour_df %&gt;%\n  mutate(district = case_when(\n    state == \"JOHOR\" & district == \"KULAI\" ~ \"KULAIJAYA\",\n    state == \"JOHOR\" & district == \"TANGKAK\" ~ \"LEDANG\",\n    state == \"PERAK\" & district == \"HULU PERAK\" ~ \"ULU PERAK\",\n    state == \"PERAK\" & district == \"MANJUNG\" ~ \"MANJUNG (DINDING)\",\n    state == \"PULAU PINANG\" & district == \"SEBERANG PERAI SELATAN\" ~ \"S.P.SELATAN\",\n    state == \"PULAU PINANG\" & district == \"SEBERANG PERAI TENGAH\" ~ \"S.P. TENGAH\",\n    state == \"PULAU PINANG\" & district == \"SEBERANG PERAI UTARA\" ~ \"S.P. UTARA\",\n    TRUE ~ district\n  )) %&gt;%\n  group_by(state, district, year) %&gt;%\n  summarise(lf = mean(lf),\n            lf_employed = mean(lf_employed),\n            lf_unemployed = mean(lf_unemployed),\n            lf_outside = mean(lf_outside),\n            p_rate = mean(p_rate),\n            u_rate = mean(u_rate),\n            ep_ratio = mean(ep_ratio))\n\n\n\n\n\n\n\nMissing labour data\n\n\n\nHowever we do not have labour data for the following state-districts, hence we will be using the national average for:\n\n‚ÄúPERLIS-PERLIS‚Äù\n‚ÄúKUALA LUMPUR-WP. KUALA LUMPUR‚Äù\n‚ÄúKUALA LUMPUR-W.P. PUTRAJAYA‚Äù\n\n\n\n\n\n\n2.4.4 Joining\n\n2.4.4.1 Join with Poverty, Inequality and Labour\nWe join the other aspatial data with our spatial crime dataframe.\n\npiv_full_df_mys &lt;- piv_crime_df_mys %&gt;%\n  left_join(poverty_df, by = c(\"state\", \"district\", \"year\")) %&gt;%\n  left_join(inequality_df, by = c(\"state\", \"district\", \"year\")) %&gt;%\n  left_join(labour_df, by = c(\"state\", \"district\", \"year\")) %&gt;%\n  left_join(population_df, by = c(\"state\", \"district\", \"year\"))\n\npiv_full_df_mys\n\n\n\n2.4.4.2 Data Subsitution (Labour)\nSimilar to crime, labour force will also need to be adjusted to the districts population for a more accurate representation.\n\npiv_full_df_mys &lt;- piv_full_df_mys %&gt;% \n  mutate(lf = lf/population,\n         lf_employed = lf_employed/population,\n         lf_unemployed = lf_unemployed/population,\n         lf_outside = lf_outside/population) %&gt;%\n  select(-population)\n\nHere we will be substituting the national average for the previously highlighted missing data from the labour dataset\n\ntarget_states &lt;- c(\"PERLIS\", \"KUALA LUMPUR\")\ntarget_districts &lt;- c(\"PERLIS\", \"WP. KUALA LUMPUR\", \"W.P. PUTRAJAYA\")\n\navg_values &lt;- piv_full_df_mys %&gt;%\n  filter(!(state %in% target_states & district %in% target_districts)) %&gt;%\n  summarize(\n    avg_lf = mean(lf, na.rm = TRUE),\n    avg_lf_employed = mean(lf_employed, na.rm = TRUE),\n    avg_lf_unemployed = mean(lf_unemployed, na.rm = TRUE),\n    avg_lf_outside = mean(lf_outside, na.rm = TRUE),\n    avg_p_rate = mean(p_rate, na.rm = TRUE),\n    avg_u_rate = mean(u_rate, na.rm = TRUE),\n    avg_ep_ratio = mean(ep_ratio, na.rm = TRUE)\n  )\n\npiv_full_df_mys &lt;- piv_full_df_mys %&gt;%\n  mutate(\n    lf = ifelse(state %in% target_states & district %in% target_districts & is.na(lf), avg_values$avg_lf, lf),\n    lf_employed = ifelse(state %in% target_states & district %in% target_districts & is.na(lf_employed), avg_values$avg_lf_employed, lf_employed),\n    lf_unemployed = ifelse(state %in% target_states & district %in% target_districts & is.na(lf_unemployed), avg_values$avg_lf_unemployed, lf_unemployed),\n    lf_outside = ifelse(state %in% target_states & district %in% target_districts & is.na(lf_outside), avg_values$avg_lf_outside, lf_outside),\n    p_rate = ifelse(state %in% target_states & district %in% target_districts & is.na(p_rate), avg_values$avg_p_rate, p_rate),\n    u_rate = ifelse(state %in% target_states & district %in% target_districts & is.na(u_rate), avg_values$avg_u_rate, u_rate),\n    ep_ratio = ifelse(state %in% target_states & district %in% target_districts & is.na(ep_ratio), avg_values$avg_ep_ratio, ep_ratio)\n  )\n\n\n\n2.4.4.3 Aggregate all Years\nWe will keep the year for filtering our application, hence we will also create an aggregate the data across the 4 years (2019 - 2022)\n\npiv_full_df_mys_agg &lt;- piv_full_df_mys %&gt;%\n  group_by(state, district) %&gt;%\n  summarise(year = 0,\n            causing_injury = mean(causing_injury),\n            murder = mean(murder),\n            rape = mean(rape),\n            robbery = mean(robbery),\n            break_in = mean(break_in),\n            theft_other = mean(theft_other),\n            vehicle_theft = mean(vehicle_theft),\n            poverty_absolute = mean(poverty_absolute),\n            poverty_relative = mean(poverty_relative),\n            gini = mean(gini),\n            lf = mean(lf),\n            lf_employed = mean(lf_employed),\n            lf_unemployed = mean(lf_unemployed),\n            lf_outside = mean(lf_outside),\n            p_rate = mean(p_rate),\n            u_rate = mean(u_rate),\n            ep_ratio = mean(ep_ratio))\n\n\npiv_full_df_mys &lt;- bind_rows(piv_full_df_mys, piv_full_df_mys_agg)\nunique(piv_full_df_mys$year)"
  },
  {
    "objectID": "datapreprocessing.html#data-selection",
    "href": "datapreprocessing.html#data-selection",
    "title": "Data Pre-Processing",
    "section": "2.5 Data Selection",
    "text": "2.5 Data Selection\nTo simplify our subsequent analysis and fine tune our clustering we will be checking for any highly correlated non-crime data and remove them for clustering.\n\n2.5.1 Visualizing the Correlation of Data\n\ncorrplot.mixed(cor(st_drop_geometry(piv_full_df_mys %&gt;% filter(year == 0))[, 4:20]),\n         lower = \"ellipse\", \n               upper = \"number\",\n               tl.pos = \"lt\",\n               diag = \"l\",\n               tl.col = \"black\",\n               tl.srt = 45,  # Slant the labels by 45 degrees\n               tl.cex = 0.5)\n\n\n\n2.5.2 Final Selection\nSince the variable\n\nep_ratio is highly correlated (&gt;0.8) with lf, lf_employed, lf_outside and p_rate we can drop them from the dataframe. (Employment ratio is much more intutive too)\nu_rate is highly correlated (&gt;0.8) with lf_unemployed we can drop it too.\n\n\npiv_df_mys &lt;- piv_full_df_mys %&gt;%\n  mutate(state_district = str_to_title(paste(state, district, sep = \"-\"))) %&gt;%\n  select(-lf, -lf_employed, -lf_unemployed, -lf_outside, -p_rate) %&gt;%\n  rename_with(~str_replace_all(., c(\"ep_ratio\" = \"employment_ratio\", \"u_rate\" = \"unemployment_rate\"))) %&gt;%\n  select(state_district, everything())\n  \ncolnames(piv_df_mys)\n\n\ncorrplot.mixed(cor(st_drop_geometry(piv_df_mys %&gt;% filter(year == 0))[, 5:16]),\n         lower = \"ellipse\", \n               upper = \"number\",\n               tl.pos = \"lt\",\n               diag = \"l\",\n               tl.col = \"black\",\n               tl.srt = 45,\n               tl.cex = 0.5)\n\nLooks much better, now lets save it as rds.\n\nwrite_rds(piv_df_mys, \"./data/rds/pivot_df.rds\")\n\n\npiv_df_mys &lt;- read_rds(\"./data/rds/pivot_df.rds\")"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Crime Hotspots: A Malaysian Perspective",
    "section": "",
    "text": "Sniffing out crime hotspots in Malaysia, making sure everyone stays safe.\nBy Group 6: Hei Yee Kai, Jeffery Lau Wei Yang, Cheo Hai Xuan Jenna\nThis project is done for Singapore Management University‚Äôs IS415 Geospatial Analytics & Applications 2024.\nThis is our webpage where we aim to create an interactive application that allows users to easily view and analyse crime rates in Malaysia.\nSatu Malaysia üá≤üáæ!"
  },
  {
    "objectID": "proposal.html",
    "href": "proposal.html",
    "title": "Proposal",
    "section": "",
    "text": "This study investigates the spatial distribution and evolution of crime in Malaysia over recent years. By employing advanced spatial analysis techniques, we aim to identify hotspots, coldspots, and emerging trends in crime patterns. Our analysis utilizes a comprehensive dataset of crime incidents, including location, type, and date of occurrence.\n\n\n\n\nAuthors: Azizul Ahmad, Tarmiji Masron, Syahrul Nizam Junaini, Mohamad Hardyman Barawi, Mohd Sofian Redzuan, Yoshinari Kimura, Norita Anak Jubit, Luqman Haqim Bismelah, Asykal Syakinah Mohd Ali\nSource\nThis study focuses on property crime hotspots in urban centers like Selangor, Kuala Lumpur, and Putrajaya, utilizing Geographic Information Systems (GIS) to map trends between 2015 and 2020. The study highlights how property crimes cluster in specific areas, enabling more efficient policing strategies like hotspot policing. This research significantly contributes to crime prevention strategies, particularly in high-density regions, by offering data-driven approaches to law enforcement agencies.\n\n\n\nAuthors: Syerrina Zakaria, Nuzlinda Abdul Rahman\nSource\nThis study applies Geographically Weighted Regression (GWR) to analyze crime in Peninsular Malaysia. By using GWR, the research provides a nuanced understanding of how different socio-economic and geographic factors impact crime rates across districts. This spatial model allows for better understanding of crime variation and helps identify significant crime factors that differ from one district to another, enhancing targeted interventions.\n\n\n\nAuthor: Syerrina Zakaria, Nuzlinda Abdul Rahman\nSource\nFor this study, exploratory spatial data analysis (ESDA) has been employed to investigate violent crime patterns. This method identifies the spatial distribution of violent crimes and suggests regional variations in crime rates, enabling policymakers to focus on crime-prone areas.\nThese studies collectively demonstrate the value of spatial analysis in understanding crime patterns, offering policymakers and law enforcement crucial insights for strategic planning and resource allocation.\n\n\n\n\nSpatial analysis plays a crucial role in understanding crime patterns by revealing how crimes are distributed across geographic areas and identifying key locations where criminal activities concentrate. Through advanced techniques like hotspot analysis, kernel density estimation, and spatial autocorrelation, spatial analysis enables researchers to detect high-risk areas (hotspots) and safer regions (coldspots).\nThis geographic insight helps to visualize crime trends, assess environmental or socio-economic factors influencing crime rates, and predict future crime occurrences. In the context of Malaysia, spatial analysis can highlight the impact of urban development, population density, or infrastructure on crime, enabling policymakers and law enforcement agencies to allocate resources more efficiently and design targeted crime prevention strategies based on geographic evidence.\nBy identifying patterns and trends at both macro and micro levels, we can better understand the dynamics of crime and to mitigate its impact on society.\n\n\n\nThe primary objective of this project is to investigate the spatial patterns and relationships of various crime types in Malaysia over time. By employing spatial analysis techniques, we aim to:\n\nIdentify hotspots and coldspots of crime.\nAssess the spatial autocorrelation of crime rates.\nExplore the impact of neighboring crime rates on local crime patterns.\nUnderstand how crime patterns vary across different regions.\nIdentify emerging hotspots where crime rates are rapidly increasing."
  },
  {
    "objectID": "proposal.html#literature-review",
    "href": "proposal.html#literature-review",
    "title": "Proposal",
    "section": "",
    "text": "Authors: Azizul Ahmad, Tarmiji Masron, Syahrul Nizam Junaini, Mohamad Hardyman Barawi, Mohd Sofian Redzuan, Yoshinari Kimura, Norita Anak Jubit, Luqman Haqim Bismelah, Asykal Syakinah Mohd Ali\nSource\nThis study focuses on property crime hotspots in urban centers like Selangor, Kuala Lumpur, and Putrajaya, utilizing Geographic Information Systems (GIS) to map trends between 2015 and 2020. The study highlights how property crimes cluster in specific areas, enabling more efficient policing strategies like hotspot policing. This research significantly contributes to crime prevention strategies, particularly in high-density regions, by offering data-driven approaches to law enforcement agencies.\n\n\n\nAuthors: Syerrina Zakaria, Nuzlinda Abdul Rahman\nSource\nThis study applies Geographically Weighted Regression (GWR) to analyze crime in Peninsular Malaysia. By using GWR, the research provides a nuanced understanding of how different socio-economic and geographic factors impact crime rates across districts. This spatial model allows for better understanding of crime variation and helps identify significant crime factors that differ from one district to another, enhancing targeted interventions.\n\n\n\nAuthor: Syerrina Zakaria, Nuzlinda Abdul Rahman\nSource\nFor this study, exploratory spatial data analysis (ESDA) has been employed to investigate violent crime patterns. This method identifies the spatial distribution of violent crimes and suggests regional variations in crime rates, enabling policymakers to focus on crime-prone areas.\nThese studies collectively demonstrate the value of spatial analysis in understanding crime patterns, offering policymakers and law enforcement crucial insights for strategic planning and resource allocation."
  },
  {
    "objectID": "proposal.html#significance-of-spatial-analysis-in-understanding-crime-patterns",
    "href": "proposal.html#significance-of-spatial-analysis-in-understanding-crime-patterns",
    "title": "Proposal",
    "section": "",
    "text": "Spatial analysis plays a crucial role in understanding crime patterns by revealing how crimes are distributed across geographic areas and identifying key locations where criminal activities concentrate. Through advanced techniques like hotspot analysis, kernel density estimation, and spatial autocorrelation, spatial analysis enables researchers to detect high-risk areas (hotspots) and safer regions (coldspots).\nThis geographic insight helps to visualize crime trends, assess environmental or socio-economic factors influencing crime rates, and predict future crime occurrences. In the context of Malaysia, spatial analysis can highlight the impact of urban development, population density, or infrastructure on crime, enabling policymakers and law enforcement agencies to allocate resources more efficiently and design targeted crime prevention strategies based on geographic evidence.\nBy identifying patterns and trends at both macro and micro levels, we can better understand the dynamics of crime and to mitigate its impact on society."
  },
  {
    "objectID": "proposal.html#research-objective",
    "href": "proposal.html#research-objective",
    "title": "Proposal",
    "section": "",
    "text": "The primary objective of this project is to investigate the spatial patterns and relationships of various crime types in Malaysia over time. By employing spatial analysis techniques, we aim to:\n\nIdentify hotspots and coldspots of crime.\nAssess the spatial autocorrelation of crime rates.\nExplore the impact of neighboring crime rates on local crime patterns.\nUnderstand how crime patterns vary across different regions.\nIdentify emerging hotspots where crime rates are rapidly increasing."
  },
  {
    "objectID": "proposal.html#data-collection-and-preparation",
    "href": "proposal.html#data-collection-and-preparation",
    "title": "Proposal",
    "section": "2.1 Data Collection and Preparation:",
    "text": "2.1 Data Collection and Preparation:\n\nAcquire Malaysia Crime data by district, year and by type.\nInspecting and understanding data fields.\nPreparing the data for analysis, including spatial data wrangling and standardization."
  },
  {
    "objectID": "proposal.html#spatial-analysis-techniques",
    "href": "proposal.html#spatial-analysis-techniques",
    "title": "Proposal",
    "section": "2.2 Spatial Analysis Techniques:",
    "text": "2.2 Spatial Analysis Techniques:\n\nEDA Choropleth Maps\nVisualize crime rates across Malaysia over time and by crime type using color-coded polygons.\nSpatial Lag Model\nCalculate the spatial lag of crime rates to assess the impact of neighboring crime rates.\nGlobal Spatial Autocorrelation\nUse Moran‚Äôs I or Geary‚Äôs C to measure the overall spatial pattern of crime rates.\nLocal Spatial Autocorrelation\nEmploying LISA maps to identify hotspots and coldspots of crime.\nSpatial Clustering\nIn-depth analysis of clusters performed with different clustering techniques."
  }
]